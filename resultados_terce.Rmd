## Presentación de resultados del Tercer Estudio Regional Comparativo y Explicativo (TERCE) del Laboratorio Latinoamericano de Evaluación de la Calidad de la Educación (LLECE)

### 1. Resumen
```{r init,results="hide",echo=F, message=F, warning=F}
library(foreign)
library(scales)
library(ggplot2)
library(plyr)

source('multiplot.R')
```

Hay grandes diferencias de oportunidades para nuestra niñez en materia educativa.   El Tercer Estudio Regional Comparativo y Explicativo (Terce, 2013) está diseñado para evaluar los logros educativos de los estudiantes mediante el puntaje obtenido en preguntas sobre lectura, matemáticas y ciencias.  Este estudio muestra que las diferencias de logros entre nuestros alumnos reflejan en forma marcada sus diferencias socioeconómicas y culturales, es decir, la inequidad.    

Este documento de divulgación es principalmente un llamado a analizar los datos Terce disponibles en la página Web de Meduca y un reto a la voluntad nacional por crear un sistema educativo justo, capaz de brindar igualdad de oportunidades.   

En el Terce las escuelas particulares mostraron mejores logros que las oficiales.  De hecho muchas de nuestras escuelas oficiales muestran niveles de aprendizaje poco adecuados para la vida esperada de sus alumnos, especialmente entre las escuelas rurales oficiales. Las diferencias de logros y la estrecha relación con las condiciones de vida se pueden ver en la figura 1.1 por ejemplo. El centro de cada círculo representa el promedio de puntajes y el promedio del índice socioeconómico y cultural de los alumnos de una escuela. El tamaño del círculo es proporcional al número de alumnos en la escuela. El índice se construye con base en respuestas a cuestionarios sobre las condiciones de vida de cada alumno: a mayor índice las condiciones son más cómodas.    


```{r puntaje_isecf_rd, fig.width=12, fig.height=10, echo=F, message=F, warning=F}

# load sexto grado puntajes
pm6 <- read.spss('./data/Puntajes_Alumnos/PM6_all_TERCE.sav', to.data.frame=T)
pc6 <- read.spss('./data/Puntajes_Alumnos/PC6_all_TERCE.sav', to.data.frame=T)
pl6 <- read.spss('./data/Puntajes_Alumnos/PL6_all_TERCE.sav', to.data.frame=T)

pm6 <- pm6[,c("sID","puntaje_estandar","nivel","idstud","country","idschool")]
pl6 <- pl6[,c("sID","puntaje_estandar","nivel","idstud","country","idschool")]
pc6 <- pc6[,c("sID","puntaje_estandar","nivel","idstud","country","idschool")]

# merge matematica, lectura y ciencias
pm6$tipo <- 'matematica'
pl6$tipo <- 'lectura'
pc6$tipo <- 'ciencias'
p6 <- rbind.fill(pm6,pl6,pc6)
p6$promedio_global <- mean(p6$puntaje_estandar, na.rm=T)
p6$sd_global <- sd(p6$puntaje_estandar, na.rm=T)

p6 <- p6[p6$country == 'PAN',]

# load factores alumnos
qd <- read.spss('./data/Directores/QD6.SAV', to.data.frame=T)
qd <- qd[qd$country == 'PAN',]

qd$dependencia <- as.factor(qd$dependencia)
qd$ruralidad <- as.factor(qd$ruralidad)
levels(qd$dependencia) <- c("Oficial","Particular")
levels(qd$ruralidad) <- c("Urbano","Rural")

# load factores familia
qf <- read.spss('./data/Familia/QF6.SAV', to.data.frame=T)
qf <- qf[qf$country == 'PAN',]
qf <- qf[,c("idschool","idstud","ISECF","INVOLUCF","CSOCBARF","SUPERVF","RECREAF","SERVBARF","VIOLBARF","MOTIVALF","subsgobf","padindig","madindig","DQFIT01","DQFIT25","DQFIT31","DQFIT34","DQFIT15_07","DQFIT18_02")]

pe <- merge(p6,qd,by='idschool')
escuela_tipo <- function(r,d) { if(r == 'Urbano' & d == 'Particular') { return(0) } else if (r == 'Urbano' & d == 'Oficial') { return(1) } else if (r == 'Rural' & d == 'Particular') {return(2)} else {return(3)}}
pe$rd <- as.factor(mapply(escuela_tipo, pe$ruralidad, pe$dependencia))
levels(pe$rd) <- c("Urbano/Particular", "Urbano/Oficial", "Rural/Particular", "Rural/Oficial")

mean_school <- aggregate(puntaje_estandar ~ idschool + rd + totalum , pe, mean)
mean_isecf_school <- aggregate(ISECF ~ idschool, qf, mean)
m <- merge(mean_school, mean_isecf_school, by=c('idschool'))

ggplot(m, aes(x=ISECF,y=puntaje_estandar,color=rd,group=1,size=totalum)) + geom_point(alpha=0.7) + geom_smooth(method = "lm", formula = y ~ poly(x, 2), se = F) + scale_size(guide=FALSE) + xlab("Índice socioeconómico y cultural promedio de los alumnos de la escuela") + ylab("Puntaje promedio de los alumnos de la escuela") + ggtitle('Figura 1.1. Logros de aprendizaje por tipo de escuela, 6to grado') + scale_y_continuous(limits=c(500,850))
```

Más importante que lamentarnos por los resultados pobres que podamos observar es enfocarnos en oportunidades de mejora. Por ejemplo, algunas escuelas oficiales rurales con bajo índice socioeconómico y cultural lograron puntajes superiores al promedio internacional del Terce, equivalente a 700 puntos, e incluso mayores que las escuelas oficiales urbanas.   Estas escuelas podrían aportarnos lecciones importantes para el resto del sistema educativo.  Este enfoque representa la aspiración de este análisis y su divulgación.   

En el contexto latinoamericano, Panamá obtiene resultados por debajo de lo esperado.  La figura 1.2 confirma la tendencia conocida de que los alumnos de países con mayor producto interno bruto (PIB) per cápita obtienen mejores puntajes en promedio. Panamá obtuvo 40 puntos menos de lo esperado para su PIB per cápita, usando como referencia la línea que representa la relación típica entre logros y PIB per cápita en la figura.   Estos resultados son consistentes con los resultados que obtuvimos en evaluaciones internacionales previas: Serce 2006, Sineca 2008 y Pisa 2009. Es decir, Panamá puede y debe mejorar significativamente sus logros de aprendizaje.      


```{r puntaje_gdp, fig.width=12, fig.height=10, echo=F, message=F, warning=F}
p6 <- rbind.fill(pm6,pl6,pc6)


gdp <- read.csv('./data/suplemental/gdp.csv')
names(gdp) <- c("Country_Name","country","gdp_2013")
m <- merge(p6,gdp,by="country")
a <- aggregate( puntaje_estandar ~ country + gdp_2013, m, mean)
ggplot(a, aes(x=gdp_2013, y=puntaje_estandar, fill=country, color=country, group=1)) + geom_point() + geom_smooth(method = "lm", se = F) + geom_text(aes(label=country)) + xlab("Producto (PIB) per cápita") + ylab("Puntaje promedio") + ggtitle("Figura 1.2. Logros de aprendizaje en 6to grado según producto (PIB) per cápita por país") + scale_x_continuous(label=dollar) + scale_y_continuous(limits=c(600,810))

```

### 2. Introducción 


La educación nacional debe servir como un gran equalizador hacia las mejores oportunidades de bienestar para todos, que renueve en cada generación las posibilidades de realización personal y de un país próspero sostenible.  

Nuestro sistema educativo dista mucho de este ideal.   Afortunadamente es posible evaluar los logros del sistema con métodos científicos que permitan recomendaciones confiables de como mejorar.   Una cultura que valora la información puede aprender de sus propios errores.    

Evaluaciones como el Terce, basadas en pruebas estandarizadas, tienen limitaciones propias del esquema de items, o preguntas que utilizan, y están sujetas a ser perfeccionadas, pero sirven como insumos valiosos para las políticas educativas cuando son analizados en contexto y junto con información relevante apropiada.    

Esta es la segunda divulgación en torno al Terce. Este documento presenta sólo algunos de los aspectos sobresalientes para lograr un documento más conciso y accesible, sin intentar ser exhaustivo.  Previamente, en 2014, Unesco y Meduca divulgaron la comparación de resultados entre el Segundo Estudio Regional Comparativo y Explicativo, o Serce 2006, y el Terce 2013.   

Con esta divulgación Meduca invita a todos los interesados, especialmente aquellos familiarizados con métodos de evaluación educativa, a iniciar un gran movimiento de exploración de los datos educativos disponibles, especialmente los resultados de las evaluaciones Serce 2006, Sineca 2008, Pisa 2009 y Terce 2013.   

### 3. Terce y la participación de Panamá

El Laboratorio Latinoamericano de Evaluación de la Calidad de la Educación, Llece, es una organización con sede en Chile que  diseña y administra evaluaciones a nivel regional.  Terce es la tercera evaluación.   Cada país revisa y edita los items o preguntas de la evaluación para asegurar que son apropiadas para su contexto nacional.     

El Terce evaluó 15 países de América Latina, listados en el margen derecho de la figura 1.2, y a la región de Nuevo León de México, omitida de la figura 1.2 porque la información estándar del PIB utilizada sólo incluye PIB de países.  El Terce cubrió las áreas de lectura de tercero y sexto grado, escritura de tercero y sexto grado, matemáticas de tercero y sexto grado, y ciencias de sexto grado.  Los resultados de escritura serán sujeto de una divulgación posterior.   

La muestra de alumnos y escuelas por país es representativa.  La muestra que elaboró Panamá no permite comparar resultados entre provincias o comarcas, por ejemplo, pero sí entre el sector oficial y particular, por ejemplo.  Comprendemos que en el futuro debemos ampliar los aspectos que puedan ser explorados confiablemente en las evaluaciones educativas del país.    

El Terce incluyó cuestionarios a los alumnos, docentes y hogares de cada alumno sobre su entorno y situación individual para poder explorar el impacto de ciertos factores que podrían mostrar relación con los logros de aprendizaje, conocidos como factores asociados. Para ser conciso, este documento sólo muestra una selección de los factores asociados y su efecto, sin intentar profundizar en sus implicaciones pues esas conclusiones deben ser resultado de un debate académico riguroso. 

`r length(unique(qd$idschool))` escuelas participaron en la prueba Terce representando cuatro tipos:  oficial urbana `r length(unique(qd[qd$dependencia == 'Oficial' & qd$ruralidad == "Urbano",]$idschool))`, oficial rural `r length(unique(qd[qd$dependencia == 'Oficial' & qd$ruralidad == "Rural",]$idschool))`, particular urbana `r length(unique(qd[qd$dependencia == 'Particular' & qd$ruralidad == "Urbano",]$idschool))`, particular rural `r length(unique(qd[qd$dependencia == 'Particular' & qd$ruralidad == "Rural",]$idschool))`.  En el total de escuelas, 3775 estudiantes correspondían a sexto grado y 3631 estudiantes a tercer grado.


```{r demo_pub_priv, fig.width=12, fig.height=7, echo=F, message=F, warning=F}
a <- aggregate(ruralidad ~ dependencia, qd, length)
ggplot(a, aes(x=dependencia, y=ruralidad)) + geom_bar(fill='#0072B2',stat="identity",width=.5) + ylab("Cantidad de escuelas") + ggtitle("Figura 3.1. Distribución de escuelas por sector escolar") +xlab("Sector escolar") + scale_y_continuous(limits=c(0,150))

```

```{r demo_ruralidad, fig.width=12, fig.height=7, echo=F, message=F, warning=F}
a <- aggregate(dependencia ~ ruralidad, qd, length)
ggplot(a, aes(x=ruralidad, y=dependencia)) + geom_bar(fill='#0072B2',stat="identity",width=.5) + ylab("Cantidad de escuelas") + ggtitle("Figura 3.2. Distribución de escuelas por ruralidad") + xlab("Ruralidad") + scale_y_continuous(limits=c(0,150))
```
Las escuelas de Panamá representan el caso típico de América Latina en cuanto a condiciones de vida.  Por ejemplo, la figura 3.3 compara nuestra situación con la de cuatro países de interés.  La distribución de nuestras escuelas según el índice socioeconómico y cultural promedio de sus alumnos se concentra alrededor del promedio de la región, es decir, en torno al valor 0.0 del índice. 

```{r demo_isecf, fig.width=12, fig.height=12, echo=F, message=F, warning=F}

# load factores familia
qf <- read.spss('./data/Familia/QF6.SAV', to.data.frame=T)
ggplot(qf[qf$country %in% c("CHL","CRI","URU","PAN","NIC"),], aes(x=ISECF)) + geom_histogram(fill='#0072B2') + ylab("Cantidad de escuelas") + facet_grid(country ~ ., scales='free_y') + scale_y_continuous(breaks=NULL) + geom_vline(x=0, colour="red", linetype = "longdash") + ggtitle("Figura 3.3. Distribución de escuelas según índice socioeconómico y cultural, comparada") + xlab("Índice socioeconómico y cultural")
```

Las edades de los participantes de tercero y sexto grado muestran un grupo importante sobre la edad esperada para el grado.    

```{r demo_genero_edad_3, fig.width=12, fig.height=10, echo=F, message=F, warning=F}
qa3 <- read.spss('./data/Alumnos/QA3.SAV', to.data.frame=T)
qa3 <- qa3[qa3$country == 'PAN',]
qa3$DQA3IT01 <- as.factor(qa3$DQA3IT01)
qa3$DQA3IT02 <- as.factor(qa3$DQA3IT02)
levels(qa3$DQA3IT01) <- c("7 años o menos","8 años","9 años", "10 años", "11 años", "12 años o mas", "NA")
levels(qa3$DQA3IT02) <- c("Niña","Niño")

ggplot(qa3, aes(x=DQA3IT01, fill=DQA3IT02)) + geom_histogram(aes(y = (..count..)/sum(..count..)), alpha=.5, position="dodge") + theme(axis.text.x = element_text(angle = 90, hjust = 1)) + ylab("Cantidad de estudiantes")  + xlab("Edad") + ggtitle("Número de estudiantes de 3er grado por edad") + scale_y_continuous(labels = percent)
```

```{r demo_genero_edad_6, fig.width=12, fig.height=10, echo=F, message=F, warning=F}
qa6 <- read.spss('./data/Alumnos/QA6.SAV', to.data.frame=T)
qa6 <- qa6[qa6$country == 'PAN',]
qa6$DQA6IT01 <- as.factor(qa6$DQA6IT01)
qa6$DQA6IT02 <- as.factor(qa6$DQA6IT02)
levels(qa6$DQA6IT01) <- c("10 años o menos","11 años","12 años", "13 años", "14 años", "15 años o mas", "NA")
levels(qa6$DQA6IT02) <- c("Niña","Niño")

ggplot(qa6, aes(x=DQA6IT01, fill=DQA6IT02)) + geom_histogram(aes(y = (..count..)/sum(..count..)), alpha=.5, position="dodge") + scale_x_discrete(labels=c("10 años o menos","11 años","12 años", "13 años", "14 años", "15 años o mas", "NA")) + theme(axis.text.x = element_text(angle = 90, hjust = 1)) + ylab("Cantidad de estudiantes") + xlab("Edad") + ggtitle("Número de estudiantes de 6to grado por edad")  + scale_y_continuous(labels = percent)
```

Las figuras 3.6 y 3.7 muestran las respuestas a las preguntas de a qué genero pertenecen y si pertenecen a una etnia originaria de Panamá.  

```{r demo_genelaro, fig.width=12, fig.height=10, echo=F, message=F, warning=F}
qa6 <- read.spss('./data/Alumnos/QA6.SAV', to.data.frame=T)
qa6 <- qa6[qa6$country == 'PAN',]
qa6$DQA6IT02 <- as.factor(qa6$DQA6IT02)
levels(qa6$DQA6IT02) <- c("Niña","Niño")

ggplot(qa6, aes(x=DQA6IT02)) + geom_histogram(aes(y = (..count..)/sum(..count..)),fill='#0072B2',width=0.5,position="dodge")  + theme(axis.text.x = element_text(angle = 90, hjust = 1)) + ylab("Cantidad de estudiantes") + xlab("¿Eres niña o niño?") + ggtitle("Figura 3.6. Respuesta a la pertenencia de género") + scale_y_continuous(labels = percent,limits=c(0,0.75))
```

```{r etnia, fig.width=12, fig.height=10, echo=F, message=F, warning=F}
qa6 <- read.spss('./data/Alumnos/QA6.SAV', to.data.frame=T)
qa6 <- qa6[qa6$country == 'PAN',]
qa6$DQA6IT06 <- as.factor(qa6$DQA6IT06)
levels(qa6$DQA6IT06) <- c("No","Si")

ggplot(qa6, aes(x=DQA6IT06)) + geom_histogram(aes(y = (..count..)/sum(..count..)),fill='#0072B2',width=0.5, position="dodge")  + theme(axis.text.x = element_text(angle = 90, hjust = 1)) + ylab("Cantidad de estudiantes") + xlab("¿Perteneces a alguna etnia indígena?") + ggtitle("Figura 3.7. Respuesta a la pertenencia de etnia originaria") + scale_y_continuous(labels = percent,limits=c(0,0.75))
```

## 4. Comparación con América Latina

Comparar resultados entre países es útil pero no lo principal. El Terce no es una competencia por el mayor puntaje promedio.  Su valor principal está en comprender la dinámica educativa para tomar acción.   

Entre los países participantes Chile obtuvo el mejor resultado seguido de Costa Rica y México, como muestran las figuras 4.1 y 4.2 para tercero y sexto grado respectivamente. La figura 4.2 es la figura 1.2, repetida aquí por conveniencia.  Panamá obtiene resulados inferiores a lo esperado para su PIB per cápita y estos resultados son consistentes con los que obtuvimos en las evaluaciones Serce 2006 y Pisa 2009. El efecto es más pronunciado para sexto grado que para tercer grado.   En esas figuras, Costa Rica sirve como ejemplo de que un país de escala y ubicación similar a la nuestra puede obtener mejores resultados.     Por tanto parece razonable confiar que con nuestra riqueza nacional podemos lograr mejores resultados, siempre y cuando le demos la prioridad social necesaria.   

```{r puntaje_gdp_3, fig.width=12, fig.height=10, echo=F, message=F, warning=F}		
		
pm3 <- read.spss('./data/Puntajes_Alumnos/PM3_all_TERCE.sav', to.data.frame=T)		
pl3 <- read.spss('./data/Puntajes_Alumnos/PL3_all_TERCE.sav', to.data.frame=T)		
		
pm3$tipo <- 'matematica'		
pl3$tipo <- 'lectura'		
		
p3 <- rbind.fill(pm3,pl3)		
gdp <- read.csv('./data/suplemental/gdp.csv')		
names(gdp) <- c("Country_Name","country","gdp_2013")		
m <- merge(p3,gdp,by="country")		
a <- aggregate( puntaje_estandar ~ country + gdp_2013, m, mean)		
ggplot(a, aes(x=gdp_2013, y=puntaje_estandar, fill=country, color=country, group=1)) + geom_point() + geom_smooth(method = "lm", se = F) + geom_text(aes(label=country)) + xlab("Producto (PIB) per cápita") + ylab("Puntaje promedio") + ggtitle("Figura 4.1. Logros de aprendizaje en 3er grado según producto (PIB) per cápita por país") + scale_x_continuous(label=dollar) + scale_y_continuous(limits=c(600,810))
``` 
```{r puntaje_gdp_6, fig.width=12, fig.height=10, echo=F, message=F, warning=F}		
	
# load sexto grado puntajes
pm6 <- read.spss('./data/Puntajes_Alumnos/PM6_all_TERCE.sav', to.data.frame=T)
pc6 <- read.spss('./data/Puntajes_Alumnos/PC6_all_TERCE.sav', to.data.frame=T)
pl6 <- read.spss('./data/Puntajes_Alumnos/PL6_all_TERCE.sav', to.data.frame=T)

pm6 <- pm6[,c("sID","puntaje_estandar","nivel","idstud","country","idschool")]
pl6 <- pl6[,c("sID","puntaje_estandar","nivel","idstud","country","idschool")]
pc6 <- pc6[,c("sID","puntaje_estandar","nivel","idstud","country","idschool")]

# merge matematica, lectura y ciencias
pm6$tipo <- 'matematica'
pl6$tipo <- 'lectura'
pc6$tipo <- 'ciencias'
p6 <- rbind.fill(pm6,pl6,pc6)
p6$promedio_global <- mean(p6$puntaje_estandar, na.rm=T)
p6$sd_global <- sd(p6$puntaje_estandar, na.rm=T)
p6 <- rbind.fill(pm6,pl6,pc6)

gdp <- read.csv('./data/suplemental/gdp.csv')
names(gdp) <- c("Country_Name","country","gdp_2013")
m <- merge(p6,gdp,by="country")
a <- aggregate( puntaje_estandar ~ country + gdp_2013, m, mean)
ggplot(a, aes(x=gdp_2013, y=puntaje_estandar, fill=country, color=country, group=1)) + geom_point() + geom_smooth(method = "lm", se = F) + geom_text(aes(label=country)) + xlab("Producto (PIB) per cápita") + ylab("Puntaje promedio") + ggtitle("Figura 4.2. Logros de aprendizaje en 6to grado según producto (PIB) per cápita por país") + scale_x_continuous(label=dollar) + scale_y_continuous(limits=c(600,810))
``` 

Más relevante en primera instancia es saber si nuestros niños y niñas logran un aprendiza útil para su propio bienestar y la prosperidad de la nación. La evaluación Terce define cuatro niveles de logros de aprendizaje.  El nivel 1 se considera poca  preparación para la vida esperada de los participantes y el nivel 4 la mejor preparación.  Corresponden a un dominio progresivamente más eficaz del área de conocimiento de interés y están explicados en el apéndice 1.  

Salvo en lecutra de sexto grado, más de 40% de nuestras niñas y niños no pasan del nivel 1 de logros de aprendizaje, y en matemáticas de sexto grado esa cifra excede 60%.  Las figuras 4.3 y 4.4 muestran como se comparan los porcentajes de alumnos de Panamá para cada grado y área de conocimiento con los del resto de los alumnos de otros países. 

```{r niveles_barcharts_3, fig.width=12, fig.height=10, echo=F, message=F, warning=F}
p6 <- rbind.fill(pm6,pl6,pc6)
p6$grado <- '6'

pm3 <- read.spss('./data/Puntajes_Alumnos/PM3_all_TERCE.sav', to.data.frame=T)
pl3 <- read.spss('./data/Puntajes_Alumnos/PL3_all_TERCE.sav', to.data.frame=T)

pm3$tipo <- 'matemática'
pl3$tipo <- 'lectura'

p3 <- rbind.fill(pm3,pl3)

p3$grado <- '3'

p <- rbind.fill(p6,p3)

ispan <- function(x) { if(x == 'PAN') { return("PAN") } else { return("OTROS") } }
p$countryp <- sapply(p$country,ispan)
a <- aggregate(puntaje_estandar ~ nivel + countryp + tipo + grado, p, length)
calc_percent <- function(c,t,g,x) { return((x/sum(a[a$countryp == c & a$tipo == t & a$grado == g,]$puntaje_estandar))) }
a$dist <- mapply(calc_percent, a$countryp, a$tipo, a$grado, a$puntaje_estandar)

#####
ggplot(a[a$grado == 3,], aes(x=nivel,y=dist,fill=countryp)) + geom_bar(stat="identity", position=position_dodge(), colour="black") + xlab("Nivel de logros de aprendizaje") + ylab("Porcentaje de estudiantes") + ggtitle("Figura 4.3. Cantidad de estudiantes por nivel de logros, 3er grado") + facet_grid(tipo ~ .) + scale_fill_brewer(palette="Spectral") + scale_y_continuous(labels = percent, limits=c(0,0.7))
```

```{r niveles_barcharts_6, fig.width=12, fig.height=15, echo=F, message=F, warning=F}
ggplot(a[a$grado == 6,], aes(x=nivel,y=dist,fill=countryp)) + geom_bar(stat="identity", position=position_dodge(), colour="black") + xlab("Nivel de logros de aprendizaje") + ylab("Porcentaje de estudiantes") + ggtitle("Figura 4.4. Cantidad de estudiantes por nivel de logros, 6to grado") + facet_grid(tipo ~ .) + scale_fill_brewer(palette="Spectral") + scale_y_continuous(labels = percent, limits=c(0,0.7))
```


## 5 Resultados según género, etnia originaria y nivel socioeconómico y cultural

Las niñas obtuvieron ligeramente mejores resultados que los niños en lectura de tercer grado, sexto grado y en ciencias de sexto grado. En matemáticas, las niñas también obtuvieron mejor resultados pero la diferencia es muy pequeña.   [NO TOMA EN CUENTA LOS QUE CONTESTARON N/A??] 

La figura 5.1 compara los puntajes promedio obtenidos por cada género combinando todas las tres áreas de conocimiento.  La figura 5.2 muestra la diferencia en promedios de las niñas comparadas con los niños expresada en desviaciones estándar, una medida común de diferencia estadística.  La diferencia positiva, es decir a favor de las niñas, es pequeña.    

```{r demo_genero_puntaje, fig.width=12, fig.height=10, echo=F, message=F, warning=F}
p6 <- p6[p6$country == 'PAN',]
qa6$DQA6IT02 <- as.factor(qa6$DQA6IT02)

genero <- merge(p6,qa6,by='idstud')
a <- aggregate(puntaje_estandar ~ DQA6IT02, genero, mean)
a$dif <- (a$puntaje_estandar - mean(p6$puntaje_estandar,na.rm=T))/sd(p6$puntaje_estandar,na.rm=T)
levels(a$DQA6IT02) <- c("Niña","Niño")
dif <- data.frame(genero=c("Niña"),std_mean=c(a$dif[1] - a$dif[2]))

ggplot(a, aes(x=DQA6IT02,y=puntaje_estandar,fill=DQA6IT02)) + geom_bar(stat='identity',width=0.25) + ggtitle("Figura 5.1.  Puntaje promedio comparado entre géneros") + ylab("Puntaje promedio") + xlab("Género") + scale_fill_discrete(guide=F)
```

```{r demo_genero_puntaje_desv, fig.width=12, fig.height=10, echo=F, message=F, warning=F}
ggplot(dif, aes(x=genero,y=std_mean)) + geom_bar(stat='identity',fill="#f8766d",width=0.15) + ggtitle('Figura 5.2. Diferencia pequeña de puntaje promedio a favor de las niñas') + ylab("Desviación estándar") + xlab("Diferencia")+ scale_fill_discrete(guide=F) + scale_y_continuous(limits=c(-0.8,0.8))
```

Los alumnos que se reconocen como miembros de etnias originarias logran menor puntaje que los que no se consideran miembros.  La figuras 5.3 compara los puntajes promedio combinando las tres áreas de conocimiento de los alumnos que se consideran de grupos originarios y de los que no.  La figura 5.4 muestra la diferencia en promedios de los dos grupos, expresado en desviaciones estandar.   La diferencia negativa es importante y en contra de los grupos originarios.       


```{r demo_etnia_puntaje, fig.width=12, fig.height=10, echo=F, message=F, warning=F}
qa6$DQA6IT06 <- as.factor(qa6$DQA6IT06)

genero <- merge(p6,qa6,by='idstud')
a <- aggregate(puntaje_estandar ~ DQA6IT06, genero, mean)
a$dif <- (a$puntaje_estandar - mean(p6$puntaje_estandar,na.rm=T))/sd(p6$puntaje_estandar,na.rm=T)
levels(a$DQA6IT06) <- c("No originarios","Originarios")

ggplot(a, aes(x=DQA6IT06,y=puntaje_estandar,fill=DQA6IT06)) + geom_bar(stat='identity',width=0.25) + ggtitle("Figura 5.3. Puntaje promedio comparado según pertenencia a grupos originarios") + ylab("Puntaje promedio") + xlab("Etnia") + scale_fill_discrete(guide=F)
```

```{r demo_etnia_puntaje_desv, fig.width=12, fig.height=10, echo=F, message=F, warning=F}
dif <- data.frame(genero=c("Originarios"),std_mean=c(a$dif[1] - a$dif[2]))
ggplot(dif, aes(x=genero,y=-std_mean)) + geom_bar(stat='identity',fill="#f8766d",width=0.25) + ggtitle('Diferencia diminuta de puntaje promedio a favor de las niñas') + ylab("Desviaciones estandar") + xlab("Diferencia")+ scale_fill_discrete(guide=F) + scale_y_continuous(limits=c(-0.8,0.8))
```

Las oportunidades de educación y salud muestran un altísimo grado de influencia en el bienestar de un individuo. Cuándo los logros de aprendizaje dependen marcadamente del poder adquisitivo de una persona es difícil argumentar que la sociedad brinda oportunidades justas a todos sus residentes.  En Panamá, la diferencia de logros entre escuelas particulares, escuelas oficiales urbanas y escuelas oficiales rurales es muy marcada.   

Las figuras 5.5 y 5.6 muestran para cada escuela participante de Panamá el puntaje promedio obtenido por sus alumnos combinando todas las áreas de conocimiento y el índice socioeconómico y cultural promedio de sus alumnos. El puntaje promedio entre todos los alumnos es 700 puntos para todas las áreas de conocimiento.  La figura 5.6 es la misma figura 1.1, repetida aquí por conveniencia.  

Conviene notar que un grupo de escuelas oficiales rurales obtuvieron logros promedio iguales o superiores a los de las escuelas oficiales urbanas a pesar de tener índices socioeconómicos y culturales menores en promedio. Estas escuelas probablemente tienen lecciones que aportar para mejorar la educación en las áreas menos favorecidas del país.    

```{r puntaje_isecf_rd_3, fig.width=12, fig.height=10, echo=F, message=F, warning=F}		
		
# load sexto grado puntajes		
pm3 <- read.spss('./data/Puntajes_Alumnos/PM3_all_TERCE.sav', to.data.frame=T)		
pl3 <- read.spss('./data/Puntajes_Alumnos/PL3_all_TERCE.sav', to.data.frame=T)		
		
pm3 <- pm3[,c("sID","puntaje_estandar","nivel","idstud","country","idschool")]		
pl3 <- pl3[,c("sID","puntaje_estandar","nivel","idstud","country","idschool")]		
		
# merge matematica, lectura y ciencias		
pm3$tipo <- 'matematica'		
pl3$tipo <- 'lectura'		
p3 <- rbind.fill(pm3,pl3)		
		
p3 <- p3[p3$country == 'PAN',]		
		
# load factores alumnos		
qd <- read.spss('./data/Directores/QD3.SAV', to.data.frame=T)		
qd <- qd[qd$country == 'PAN',]		
		
qd$dependencia <- as.factor(qd$dependencia)		
qd$ruralidad <- as.factor(qd$ruralidad)		
levels(qd$dependencia) <- c("Oficial","Particular")		
levels(qd$ruralidad) <- c("Urbano","Rural")		
		
# load factores familia		
qf <- read.spss('./data/Familia/QF3.SAV', to.data.frame=T)		
qf <- qf[qf$country == 'PAN',]		
qf <- qf[,c("idschool","idstud","ISECF","INVOLUCF","CSOCBARF","SUPERVF","RECREAF","SERVBARF","VIOLBARF","MOTIVALF","subsgobf","padindig","madindig","DQFIT01","DQFIT25","DQFIT31","DQFIT34","DQFIT15_07","DQFIT18_02")]		
		
pe <- merge(p3,qd,by='idschool')		
escuela_tipo <- function(r,d) { if(r == 'Urbano' & d == 'Particular') { return(0) } else if (r == 'Urbano' & d == 'Oficial') { return(1) } else if (r == 'Rural' & d == 'Particular') {return(2)} else {return(3)}}		
pe$rd <- as.factor(mapply(escuela_tipo, pe$ruralidad, pe$dependencia))		
levels(pe$rd) <- c("Urbano/Particular", "Urbano/Oficial", "Rural/Particular", "Rural/Oficial")		
		
mean_school <- aggregate(puntaje_estandar ~ idschool + rd + totalum , pe, mean)		
mean_isecf_school <- aggregate(ISECF ~ idschool, qf, mean)		
m <- merge(mean_school, mean_isecf_school, by=c('idschool'))		
		
ggplot(m, aes(x=ISECF,y=puntaje_estandar,color=rd,group=1,size=totalum)) + geom_point(alpha=0.7) + geom_smooth(method = "lm", formula = y ~ poly(x, 2), se = F) + scale_size(guide=FALSE) + xlab("Índice socioeconómico y cultural promedio de los alumnos de la escuela") + ylab("Puntaje promedio de los alumnos de la escuela") + ggtitle('Figura 5.5. Logros de aprendizaje por tipo de escuela, 3er grado') + scale_y_continuous(limits=c(500,850)) + scale_colour_discrete(guide=F)		
```

```{r puntaje_isecf_rd_6, fig.width=12, fig.height=10, echo=F, message=F, warning=F}

# load sexto grado puntajes
pm6 <- read.spss('./data/Puntajes_Alumnos/PM6_all_TERCE.sav', to.data.frame=T)
pc6 <- read.spss('./data/Puntajes_Alumnos/PC6_all_TERCE.sav', to.data.frame=T)
pl6 <- read.spss('./data/Puntajes_Alumnos/PL6_all_TERCE.sav', to.data.frame=T)

pm6 <- pm6[,c("sID","puntaje_estandar","nivel","idstud","country","idschool")]
pl6 <- pl6[,c("sID","puntaje_estandar","nivel","idstud","country","idschool")]
pc6 <- pc6[,c("sID","puntaje_estandar","nivel","idstud","country","idschool")]

# merge matematica, lectura y ciencias
pm6$tipo <- 'matematica'
pl6$tipo <- 'lectura'
pc6$tipo <- 'ciencias'
p6 <- rbind.fill(pm6,pl6,pc6)
p6$promedio_global <- mean(p6$puntaje_estandar, na.rm=T)
p6$sd_global <- sd(p6$puntaje_estandar, na.rm=T)

p6 <- p6[p6$country == 'PAN',]

# load factores alumnos
qd <- read.spss('./data/Directores/QD6.SAV', to.data.frame=T)
qd <- qd[qd$country == 'PAN',]

qd$dependencia <- as.factor(qd$dependencia)
qd$ruralidad <- as.factor(qd$ruralidad)
levels(qd$dependencia) <- c("Oficial","Particular")
levels(qd$ruralidad) <- c("Urbano","Rural")

# load factores familia
qf <- read.spss('./data/Familia/QF6.SAV', to.data.frame=T)
qf <- qf[qf$country == 'PAN',]
qf <- qf[,c("idschool","idstud","ISECF","INVOLUCF","CSOCBARF","SUPERVF","RECREAF","SERVBARF","VIOLBARF","MOTIVALF","subsgobf","padindig","madindig","DQFIT01","DQFIT25","DQFIT31","DQFIT34","DQFIT15_07","DQFIT18_02")]

pe <- merge(p6,qd,by='idschool')
escuela_tipo <- function(r,d) { if(r == 'Urbano' & d == 'Particular') { return(0) } else if (r == 'Urbano' & d == 'Oficial') { return(1) } else if (r == 'Rural' & d == 'Particular') {return(2)} else {return(3)}}
pe$rd <- as.factor(mapply(escuela_tipo, pe$ruralidad, pe$dependencia))
levels(pe$rd) <- c("Urbano/Particular", "Urbano/Oficial", "Rural/Particular", "Rural/Oficial")

mean_school <- aggregate(puntaje_estandar ~ idschool + rd + totalum , pe, mean)
mean_isecf_school <- aggregate(ISECF ~ idschool, qf, mean)
m <- merge(mean_school, mean_isecf_school, by=c('idschool'))

ggplot(m, aes(x=ISECF,y=puntaje_estandar,color=rd,group=1,size=totalum)) + geom_point(alpha=0.7) + geom_smooth(method = "lm", formula = y ~ poly(x, 2), se = F) + scale_size(guide=FALSE) + xlab("Índice socioeconómico y cultural promedio de los alumnos de la escuela") + ylab("Puntaje promedio de los alumnos de la escuela") + ggtitle('Figura 5.6. Logros de aprendizaje por tipo de escuela, 6to grado') + scale_y_continuous(limits=c(500,850)) + scale_colour_discrete(guide=F)
```

## 6 Relacion entre logros de aprendizaje y factores asociados seleccionados

Los factores asociados son características o circumstancias cuantificables que podrían mostrar relación con los logros de aprendizaje.  Para ser conciso, este documento muestra sólo una selección de factores que pueden resultar de interés, dejando fuera otros que seguramente también serán de interés y que deben ser explorados en estudios posteriores.   

El que un factor muestre relación con los logros de aprendizaje no es prueba de que el factor sea la causa de los logros o que los garantice.   A modo de ejemplo, una mejor situación socioeconómica y cultural da la oportunidad de asistir a una mejor escuela tanto en infraestructura como en eficacia, sin que sea claro cuál de esos tres factores es el mayor responsable por los logros de aprendizaje observados.  En forma similar, varios de los factores explorados en esta sección tienen relación potencial con el índice socioeconómico y cultural.   Las relaciones observadas deberán pasar por un debate académico más extenso para llegar a conclusiones confiables.  

La figura 6.1 muestra el efecto del índice de infraestructura de la escuela, construido con base en cuestionarios al respecto. La relación es marcada: a mejor infraestructura mayor puntaje promedio de las escuelas.   Por supuesto, este es uno de los factores que puede estar reflejando el índice socioeconómico y cultural de los alumnos de las escuelas.   

```{r puntaje_INFRAD, fig.width=12, fig.height=10, echo=F, message=F, warning=F}

# load factores alumnos
qd <- read.spss('./data/Directores/QD6.SAV', to.data.frame=T)
qd <- qd[qd$country == 'PAN',]

qd$dependencia <- as.factor(qd$dependencia)
qd$ruralidad <- as.factor(qd$ruralidad)
levels(qd$dependencia) <- c("Oficial","Particular")
levels(qd$ruralidad) <- c("Urbano","Rural")

# load factores familia
qf <- read.spss('./data/Familia/QF6.SAV', to.data.frame=T)
qf <- qf[qf$country == 'PAN',]
qf <- qf[,c("idschool","idstud","ISECF","INVOLUCF","CSOCBARF","SUPERVF","RECREAF","SERVBARF","VIOLBARF","MOTIVALF","subsgobf","padindig","madindig","DQFIT01","DQFIT25","DQFIT31","DQFIT34","DQFIT15_07","DQFIT18_02")]

pe <- merge(p6,qd,by='idschool')
escuela_tipo <- function(r,d) { if(r == 'Urbano' & d == 'Particular') { return(0) } else if (r == 'Urbano' & d == 'Oficial') { return(1) } else if (r == 'Rural' & d == 'Particular') {return(2)} else {return(3)}}
pe$rd <- as.factor(mapply(escuela_tipo, pe$ruralidad, pe$dependencia))
levels(pe$rd) <- c("Urbano/Particular", "Urbano/Oficial", "Rural/Particular", "Rural/Oficial")

mean_school <- aggregate(puntaje_estandar ~ idschool + rd + totalum , pe, mean)
mean_infrad_school <- aggregate(INFRAD ~ idschool, qd, mean)
m <- merge(mean_school, mean_infrad_school, by=c('idschool'))

ggplot(m, aes(x=INFRAD,y=puntaje_estandar,color=rd,group=1)) + geom_point(alpha=0.7) + geom_smooth(method = "lm", se = F) + scale_size(guide=FALSE) + xlab("Índice de infraestructura de la escuela") + ylab("Puntaje promedio por escuela") +  ggtitle('Figura 6.1. Logros de aprendizaje según infraestructura escolar') + scale_y_continuous(limits=c(500,850))
```
La figura 6.2 sí muestra relación entre la autonomía administrativa de la escuela y los logros de aprendizaje de sus alumnos.  En este caso, el índice de autonomía actúa como un ranking: a menor índice mayor autonomía.   

```{r puntaje_AUTOADD, fig.width=12, fig.height=10, echo=F, message=F, warning=F}
# load factores alumnos
qd <- read.spss('./data/Directores/QD6.SAV', to.data.frame=T)
qd <- qd[qd$country == 'PAN',]

qd$dependencia <- as.factor(qd$dependencia)
qd$ruralidad <- as.factor(qd$ruralidad)
levels(qd$dependencia) <- c("Oficial","Particular")
levels(qd$ruralidad) <- c("Urbano","Rural")

# load factores familia
qf <- read.spss('./data/Familia/QF6.SAV', to.data.frame=T)
qf <- qf[qf$country == 'PAN',]
qf <- qf[,c("idschool","idstud","ISECF","INVOLUCF","CSOCBARF","SUPERVF","RECREAF","SERVBARF","VIOLBARF","MOTIVALF","subsgobf","padindig","madindig","DQFIT01","DQFIT25","DQFIT31","DQFIT34","DQFIT15_07","DQFIT18_02")]

pe <- merge(p6,qd,by='idschool')
escuela_tipo <- function(r,d) { if(r == 'Urbano' & d == 'Particular') { return(0) } else if (r == 'Urbano' & d == 'Oficial') { return(1) } else if (r == 'Rural' & d == 'Particular') {return(2)} else {return(3)}}
pe$rd <- as.factor(mapply(escuela_tipo, pe$ruralidad, pe$dependencia))
levels(pe$rd) <- c("Urbano/Particular", "Urbano/Oficial", "Rural/Particular", "Rural/Oficial")

mean_school <- aggregate(puntaje_estandar ~ idschool + rd + totalum , pe, mean)
mean_infrad_school <- aggregate(AUTOADD ~ idschool, qd, mean)
m <- merge(mean_school, mean_infrad_school, by=c('idschool'))

ggplot(m, aes(x=AUTOADD,y=puntaje_estandar,color=rd,group=1)) + geom_point(alpha=0.7) + geom_smooth(method = "lm",  se = F) + scale_size(guide=FALSE) + xlab("Índice de autonomía administrativa de la escuela") + ylab("Puntaje promedio por escuela") +  ggtitle('Figura 6.2. Logros de aprendizaje según autonomía administrativa') + scale_y_continuous(limits=c(500,850))
```

Curiosamente, los resultados del Terce muestran poca relación entre un índice de actitudes y motivación de docentes y los logros de aprendizajes.  La figura 6.3 muestra que aunque el índice varía desde valores -2 a +2, el puntaje promedio entre todas las áreas de conocimiento se mantiene cerca de 670 puntos, como indíca la línea azul.  Es decir, el índice hace poca diferencia.  Esta observación seguramente será sujeto de mayor validación y análisis.   

```{r echo=F,message=F,warning=F}
pm6 <- read.spss('./data/Puntajes_Alumnos/PM6_all_TERCE.sav', to.data.frame=T)
profmat6 <- read.spss('./data/Profesores/QP_M6.SAV', to.data.frame=T)

pm6 <- pm6[pm6$country == 'PAN',]
profmat6 <- profmat6[profmat6$country == 'PAN',]

pm6 <- pm6[,c("sID","puntaje_estandar","idschool","nivel")]
names(pm6) <- c("sID","puntaje_estandar","idschool","nivel")

pm6 <- merge(pm6,profmat6,by="idschool")

pl6 <- read.spss('./data/Puntajes_Alumnos/PL6_all_TERCE.sav', to.data.frame=T)
proflec6 <- read.spss('./data/Profesores/QP_L6.SAV', to.data.frame=T)

pl6 <- pl6[pl6$country == 'PAN',]
proflec6 <- proflec6[proflec6$country == 'PAN',]

pl6 <- pl6[,c("sID","puntaje_estandar","idschool","nivel")]
names(pl6) <- c("sID","puntaje_estandar","idschool","nivel")

pl6 <- merge(pl6,proflec6,by="idschool")


pc6 <- read.spss('./data/Puntajes_Alumnos/PC6_all_TERCE.sav', to.data.frame=T)
profcien6 <- read.spss('./data/Profesores/QP_M6.SAV', to.data.frame=T)

pc6 <- pc6[pc6$country == 'PAN',]
profcien6 <- profcien6[profcien6$country == 'PAN',]

pc6 <- pc6[,c("sID","puntaje_estandar","idschool","nivel")]
names(pc6) <- c("sID","puntaje_estandar","idschool","nivel")

pc6 <- merge(pc6,profcien6,by="idschool")

# merge matematica, lectura y ciencias
pm6$tipo <- 'matematica'
pl6$tipo <- 'lectura'
pc6$tipo <- 'ciencias'
p6prof <- rbind.fill(pm6,pl6,pc6)
```

```{r puntaje_prof_MOTIVP, fig.width=12, fig.height=10, echo=F, message=F, warning=F}
a <- aggregate(puntaje_estandar ~ idtealin + tipo + MOTIVP, p6prof, mean)
ggplot(a, aes(x=MOTIVP,y=puntaje_estandar,,group=1,color=tipo)) + geom_point(alpha=0.7) + geom_smooth(method = "lm",  se = F) + xlab("Índice de actitudes y motivación docente") + ylab("Puntaje promedio por escuela") +  ggtitle('Figura 6.3. Logros de aprendizaje según movitación docente') + scale_y_continuous(limits=c(475,850))
```
La edad de los docentes parece hacer una diferencia en los logros de aprendizaje.    

```{r puntaje_prof_DQPIT01, fig.width=12, fig.height=10, echo=F, message=F, warning=F}
a <- aggregate(puntaje_estandar ~ idtealin + tipo + DQPIT01, p6prof, mean)
ggplot(a, aes(x=DQPIT01,y=puntaje_estandar,,group=1,color=tipo)) + geom_point(alpha=0.7) + geom_smooth(method = "lm",  se = F) + xlab("Edad") + ylab("Puntaje promedio por escuela")  +  ggtitle('Figura 6.4. Logros de aprendizaje según edad del docente') + scale_y_continuous(limits=c(475,850))
```
La lengua [MATERNA] del docente también paree tener relación con los logros de aprendizaje y el efecto positivo es muy pronunciado en matemáticas cuando la lengua [MATERNA] es extranjera.  Este es uno de los efectos más significativos entre los distintos factores.  La siguiente figura 6.5 ilustra el efecto de la lengua [MATERNA] para las tres áreas de conocimiento indicadas. En evaluación de aprendizaje, el efecto se expresa típicamente como desviaciones estándar del puntaje promedio; en este caso el promedio obtenido por los alumnos de Panamá.  Esta desviación es una medida estándar de la diferencia estadística.   

```{r puntaje_prof_DQPIT03, fig.width=12, fig.height=5, echo=F, message=F, warning=F}
p6prof$DQPIT03 <- as.factor(p6prof$DQPIT03)
levels(p6prof$DQPIT03) <- c("Castellano","Lengua extranjera","Lengua indígena 1","Lengua indígena 2", "Otra lengua")
a <- aggregate(puntaje_estandar ~ DQPIT03 + tipo + DQPIT03, p6prof, mean)
a$dif <- (a$puntaje_estandar - mean(p6prof$puntaje_estandar,na.rm=T))/sd(p6prof$puntaje_estandar,na.rm=T)
ggplot(a, aes(x=tipo,y=dif,fill=DQPIT03)) + geom_bar(stat='identity',position='dodge') + xlab("") + ylab("Desviación estándar") + scale_y_continuous(limits=c(-1.2,1.5)) + ggtitle('Figura 6.5. Efecto de lengua [MATERNA] del docente')
```
La jornada completa también parece tener un efecto positivo importante en el logro de los aprendizajes.   

```{r puntaje_prof_DQPIT07, fig.width=12, fig.height=5, echo=F, message=F, warning=F}
p6prof$DQPIT07 <- as.factor(p6prof$DQPIT07)
levels(p6prof$DQPIT07) <- c("En la mañana","En la tarde","Jornada completa","Otra jornada")
a <- aggregate(puntaje_estandar ~ DQPIT07 + tipo + DQPIT07, p6prof, mean)
a$dif <- (a$puntaje_estandar - mean(p6prof$puntaje_estandar,na.rm=T))/sd(p6prof$puntaje_estandar,na.rm=T)
ggplot(a, aes(x=tipo,y=dif,fill=DQPIT07)) + geom_bar(stat='identity',position='dodge') + xlab("") + ylab("Desviación estándar") + scale_y_continuous(limits=c(-1.2,1.5)) + ggtitle('Figura 6.6. Efecto del tipo de jornada')
```
El nivel educativo del docente tiene un efecto positivo.   [AVERIGUAR SIGNIFICADO DE VALORES]

```{r puntaje_prof_DQPIT11, fig.width=12, fig.height=5, echo=F, message=F, warning=F}
p6prof$DQPIT11 <- as.factor(p6prof$DQPIT11)
a <- aggregate(puntaje_estandar ~ DQPIT11 + tipo + DQPIT11, p6prof, mean)
a$dif <- (a$puntaje_estandar - mean(p6prof$puntaje_estandar,na.rm=T))/sd(p6prof$puntaje_estandar,na.rm=T)
ggplot(a, aes(x=tipo,y=dif,fill=DQPIT11)) + geom_bar(stat='identity',position='dodge') + xlab("") + ylab("Desviación estándar") + ggtitle('Figura 6.7. Efecto del nivel de educación completado por el docente') + scale_y_continuous(limits=c(-1.2,1.5))
```
Los incentivos económicos al docente muestran un efecto positivo en los logros de aprendizaje.  

```{r puntaje_prof_DQPIT14, fig.width=12, fig.height=5, echo=F, message=F, warning=F}
p6prof$DQPIT14 <- as.factor(p6prof$DQPIT14)
levels(p6prof$DQPIT14) <- c("No","Si")
a <- aggregate(puntaje_estandar ~ DQPIT14 + tipo + DQPIT14, p6prof, mean)
a$dif <- (a$puntaje_estandar - mean(p6prof$puntaje_estandar,na.rm=T))/sd(p6prof$puntaje_estandar,na.rm=T)
ggplot(a, aes(x=tipo,y=dif,fill=DQPIT14)) + geom_bar(stat='identity',position='dodge') + xlab("¿Ha recibido usted alguna vez un incentivo económico por desempeño docente") + ylab("Desviación estándar") + ggtitle('Figura 6.8. Efecto si el docente ha recibido o no incentivos económicos por desempeño') + scale_y_continuous(limits=c(-1.2,1.5))
```

```{r echo=F,messages=F,warnings=F}
# load sexto grado puntajes
pm6 <- read.spss('./data/Puntajes_Alumnos/PM6_all_TERCE.sav', to.data.frame=T)
pc6 <- read.spss('./data/Puntajes_Alumnos/PC6_all_TERCE.sav', to.data.frame=T)
pl6 <- read.spss('./data/Puntajes_Alumnos/PL6_all_TERCE.sav', to.data.frame=T)

pm6 <- pm6[,c("sID","puntaje_estandar","nivel","idstud","country","idschool")]
pl6 <- pl6[,c("sID","puntaje_estandar","nivel","idstud","country","idschool")]
pc6 <- pc6[,c("sID","puntaje_estandar","nivel","idstud","country","idschool")]

# merge matematica, lectura y ciencias
pm6$tipo <- 'matematica'
pl6$tipo <- 'lectura'
pc6$tipo <- 'ciencias'
p6 <- rbind.fill(pm6,pl6,pc6)

p6 <- p6[p6$country == 'PAN',]

# load factores familia
qf <- read.spss('./data/Familia/QF6.SAV', to.data.frame=T)
qf <- qf[qf$country == 'PAN',]

pest <- merge(p6,qf,by='idstud')
```
Las actividades recreativas con la familia también muestran un efecto positivo. En este caso los círculos en la figura corresponden al puntaje de un alumno en un área de conocimiento. [CONFIRMAR SI ES RANKING O MEDICION] 

```{r puntaje_familia_RECREAF, fig.width=12, fig.height=10, echo=F, message=F, warning=F}
ggplot(pest, aes(x=RECREAF,y=puntaje_estandar,,group=1,color=tipo)) + geom_point(alpha=0.2) + geom_smooth(method = "lm",  se = F) + xlab("Índice de actividades recreativas con la familia") + ylab("Desviación estándar") + ggtitle('Figura 6.9. Efecto de recreación con la familia') + scale_y_continuous(limits=c(200,1200))
```
El uso de computador educativo parece favorable para logros de aprendizaje.  Los círculos corresponden al puntaje de un alumno en un área de conocimiento.  [VERIFICAR QUE NO ES UN RANKING]

```{r echo=F,messages=F,warnings=F}		
# load sexto grado puntajes		
pm6 <- read.spss('./data/Puntajes_Alumnos/PM6_all_TERCE.sav', to.data.frame=T)		
pc6 <- read.spss('./data/Puntajes_Alumnos/PC6_all_TERCE.sav', to.data.frame=T)		
pl6 <- read.spss('./data/Puntajes_Alumnos/PL6_all_TERCE.sav', to.data.frame=T)			
		
pm6 <- pm6[,c("sID","puntaje_estandar","nivel","idstud","country","idschool")]		
pl6 <- pl6[,c("sID","puntaje_estandar","nivel","idstud","country","idschool")]		
pc6 <- pc6[,c("sID","puntaje_estandar","nivel","idstud","country","idschool")]		
		
# merge matematica, lectura y ciencias		
pm6$tipo <- 'matematica'		
pl6$tipo <- 'lectura'		
pc6$tipo <- 'ciencias'		
p6 <- rbind.fill(pm6,pl6,pc6)		
		
p6 <- p6[p6$country == 'PAN',]		
		
# load factores familia		
qa <- read.spss('./data/Alumnos/QA6.SAV', to.data.frame=T)		
qa <- qa[qa$country == 'PAN',]		
		
pest <- merge(p6,qa,by='idstud')		
```		
```{r puntaje_alumno_PCEDUCA6, fig.width=12, fig.height=10, echo=F, message=F, warning=F}		
ggplot(pest, aes(x=PCEDUCA6,y=puntaje_estandar,,group=1,color=tipo)) + geom_point(alpha=0.2) + geom_smooth(method = "lm",  se = F) + xlab("Índice de uso de computador educativo") + ylab("Puntaje promedio de los alumnos")	+  ggtitle('Figura 6.10. Logros de aprendizaje según uso de computador educativo') + scale_y_continuous(limits=c(200,1200))
```		
## Apéndice 1.  Niveles de logros educativos por área y grado		

[TRANSCRIBIR DE LA INFORMACION TERCE]
